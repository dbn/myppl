define(["jquery","underscore","backbone","model/menus","view/menu/menuview","view/home/homeview"],function(a,b,c,d,e,f){var g=c.View.extend({el:a("#appcontainer"),content:a("#content"),currentView:null,menuCollection:new d([{caption:"Home",menuUrl:"#/home"},{caption:"Concept",menuUrl:"#/concept"},{caption:"Subject",menuUrl:"#/subject"},{caption:"Contacts",menuUrl:"#/contacts"}]),initialize:function(){this.menuView=new e({collection:this.menuCollection}),this.render(),this.menuView.render()},render:function(){a(this.content).empty()},homeView:new f,showHome:function(){this.menuView.setActiveMenu("Home"),a.when(this.setCurrentView(this.homeView)).then(this.homeView.showHome())},showArtist:function(b){this.menuView.setActiveMenu("Home");var c=this.homeView;a.when(this.setCurrentView(this.homeView)).done(function(){c.showArtist(b)})},showCity:function(b){this.menuView.setActiveMenu("Home");var c=this.homeView;a.when(this.setCurrentView(this.homeView)).done(function(){c.showCity(b)})},showConcept:function(){this.menuView.setActiveMenu("Concept"),this.loadAndSetView("view/concept/conceptview")},showSubject:function(){this.menuView.setActiveMenu("Subject"),this.loadAndSetView("view/subject/subjectview")},showContacts:function(){this.menuView.setActiveMenu("Contacts"),this.loadAndSetView("view/contacts/contactsview")},loadAndSetView:function(b){var c=this;a.when(this.loadView(b)).done(function(a){c.setCurrentView(a)})},views:{},loadView:function(b){var c=a.Deferred();if(this.views[b])return c.resolve(this.views[b].instance),c;var d=this;return require([b],function(a){var e=new a;d.views[b]={instance:e,"class":a},c.resolve(e)}),c},setCurrentView:function(b){var c=a.Deferred();if(this.currentView==b&&this.currentView.isLoadedAndRendered)c.resolve();else{this.currentView&&this.currentView.el&&a(this.currentView.el).detach();var d=this;a.when(b.loadAndRender()).done(function(){a(b.el).appendTo(a(d.content)),d.currentView=b,c.resolve(b)})}return c.promise()}});return new g})